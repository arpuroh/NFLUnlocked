<!DOCTYPE html>
<html lang="en" class="">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NFL Unlocked - Week 11 Power Rankings</title>
    
    <meta property="og:title" content="NFL Unlocked - Week 11 Power Rankings" />
    <meta property="og:description" content="Week 11 Update: The Heist, The Streak, and The Commish." />
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=Black+Ops+One&display=swap" rel="stylesheet">
    
    <style>
        :root {
            /* Light Mode Vars */
            --bg-primary: #f3f4f6;
            --bg-secondary: #ffffff;
            --text-primary: #111827;
            --text-secondary: #4b5563;
            --accent: #4f46e5;
            --border: #e5e7eb;
            --chart-fill: rgba(79, 70, 229, 0.1);
            --chart-line: #1f2937;
            --chart-median: #9ca3af;
        }

        .dark {
            /* Dark Mode Vars */
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --text-primary: #f8fafc;
            --text-secondary: #94a3b8;
            --accent: #6366f1;
            --border: #334155;
            --chart-fill: rgba(99, 102, 241, 0.1);
            --chart-line: #e5e7eb;
            --chart-median: #6b7280;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .font-black-ops { font-family: 'Black Ops One', cursive; }

        /* Card Styling */
        .ranking-card, .superlative-card {
            background-color: var(--bg-secondary);
            border: 1px solid var(--border);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
            border-radius: 16px;
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.3s ease;
        }
        
        .ranking-card:hover, .superlative-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 20px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.05);
        }

        /* Animations */
        .card-enter {
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.6s forwards;
        }

        @keyframes fadeInUp {
            to { opacity: 1; transform: translateY(0); }
        }

        .intro-enter {
            opacity: 0;
            animation: fadeIn 1s forwards;
        }

        @keyframes fadeIn {
            to { opacity: 1; }
        }

        /* Rank Number Styling */
        .rank-number {
            font-size: 3.5rem;
            line-height: 1;
            font-weight: 900;
            font-family: 'Inter', sans-serif;
            transition: color 0.3s;
        }
        
        @media (min-width: 768px) {
            .rank-number { font-size: 4rem; }
        }

        /* Gradient Colors for Ranks */
        .rank-gold { color: #fbbf24; text-shadow: 0 2px 10px rgba(251, 191, 36, 0.3); }
        .rank-green { color: #10b981; }
        .rank-neutral { color: #6b7280; }
        .rank-red { color: #ef4444; }

        /* Chart */
        .chart-wrapper {
            position: relative;
            height: 80px;
            width: 100%;
        }
        
        /* Superlatives Grid */
        .superlative-grid {
            display: grid;
            grid-template-columns: repeat(1, 1fr);
            gap: 1rem;
            margin-bottom: 3rem;
        }
        
        @media (min-width: 640px) { .superlative-grid { grid-template-columns: repeat(2, 1fr); } }
        @media (min-width: 1024px) { .superlative-grid { grid-template-columns: repeat(4, 1fr); } }

        .superlative-emoji { font-size: 2.5rem; margin-bottom: 0.5rem; }
        .superlative-title { font-weight: 800; font-size: 0.85rem; margin-bottom: 0.25rem; text-transform: uppercase; letter-spacing: -0.02em; }
        
        .text-boom { color: #10b981; }
        .text-bust { color: #ef4444; }
        .text-fraud { color: #ec4899; }
        .text-worst { color: #f59e0b; }

        /* Trend Indicators */
        .trend-up { color: #10b981; font-weight: 700; }
        .trend-down { color: #ef4444; font-weight: 700; }
        .trend-flat { color: var(--text-secondary); font-weight: 700; }

        /* Badges */
        .badge {
            font-size: 0.65rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-weight: 700;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            border: 1px solid var(--border);
            background-color: var(--bg-primary);
            color: var(--text-secondary);
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <!-- Header -->
    <header class="sticky top-0 z-50 backdrop-blur-md bg-white/80 dark:bg-gray-900/80 border-b border-[var(--border)] transition-colors duration-300">
        <div class="container mx-auto px-4 py-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-3">
                    <span class="text-3xl font-black tracking-tighter text-[var(--text-primary)]">NFL <span class="text-[var(--accent)]">UNLOCKED</span></span>
                </div>
                
                <button id="theme-toggle" class="p-2 rounded-full bg-[var(--bg-primary)] hover:bg-[var(--border)] transition-colors focus:outline-none">
                    <svg id="sun-icon" class="w-5 h-5 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>
                    <svg id="moon-icon" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow container mx-auto px-4 py-8 max-w-6xl">
        
        <!-- Intro -->
        <div class="mb-12 text-left space-y-6 intro-enter">
            <h1 class="text-4xl md:text-5xl font-extrabold text-[var(--text-primary)] tracking-tight">Week 11: The Heist & The Streak</h1>
            <div class="prose prose-lg text-[var(--text-secondary)] leading-relaxed space-y-4 max-w-4xl">
                <p>
                    Ladies and gentlemen, welcome back to <strong>NFL Unlocked</strong>. It has been five weeks since our last update‚Äîan eternity in fantasy football years‚Äîand in that time, the landscape of our league has shifted dramatically. We have witnessed tyranny, we have witnessed miracles, and we have witnessed one of the most lopsided trades in the history of organized sports.
                </p>
                
                <div>
                    <h3 class="text-xl font-bold text-[var(--text-primary)] mb-2">üëë Hail Mary: The Evil Empire</h3>
                    <p>
                        Let's start with <strong>Hail Mary</strong> (Andrew). Sitting at 18-4, this team is less of a fantasy squad and more of a buzzsaw. Andrew has been running the league like a dictator for weeks, consistently putting up 130+ points while hoarding FAAB like it's gold bullion ($662!). He casually dropped 137 points this week while the rest of us fight for scraps.
                    </p>
                </div>

                <div>
                    <h3 class="text-xl font-bold text-[var(--text-primary)] mb-2">üí© The Poop Squad Miracle</h3>
                    <p>
                        On the flip side, we have the feel-good story of the year. <strong>Poop Squad</strong> is on a winning streak! Yes, the team that spent the first two months as a glorified bye week has won two in a row, including a "fraudulent but glorious" 91-point win to humiliate Kim Jong Nate. Anuj has rallied the troops from the depths of the standings (4-18). The basement is no longer a prison; it's a launchpad.
                    </p>
                </div>

                <div>
                    <h3 class="text-xl font-bold text-[var(--text-primary)] mb-2">üöî The "Injured Reserve" Heist</h3>
                    <p>
                        Finally, we need to discuss the elephant in the room. <strong>The Injured Reserved</strong> (Greg) pulled off a heist last month. Trading for <em>Christian McCaffrey</em> and <em>Brian Robinson Jr.</em> from Kim Jong Nate was highway robbery. Kim Jong Nate, blink twice if you need help. That trade has turned Greg's team into a nuclear weapon, leading the league in total points (1547 PF). The authorities have been notified.
                    </p>
                </div>
            </div>
        </div>

        <!-- SUPERLATIVES SECTION -->
        <div class="mb-12 intro-enter" style="animation-delay: 0.2s;">
            <h2 class="text-3xl font-black text-center mb-8 text-[var(--text-primary)] tracking-tight uppercase">Weekly Superlatives</h2>
            <div class="superlative-grid">
                
                <!-- Biggest Boom -->
                <div class="superlative-card p-5 text-center">
                    <div class="superlative-emoji">üöÄ</div>
                    <div class="superlative-title text-boom">Biggest Boom</div>
                    <div class="font-bold text-lg text-[var(--text-primary)] mb-1">The Injured Reserved</div>
                    <p class="text-xs text-[var(--text-secondary)] leading-snug mt-2">
                        Dropped a massive <strong>145.00 points</strong> to obliterate Leo the Cleo. Beating the median by nearly 32 points isn't just a win; it's a statement. With CMC and Zay Flowers, this team is a nuclear weapon.
                    </p>
                </div>

                <!-- Biggest Bust -->
                <div class="superlative-card p-5 text-center">
                    <div class="superlative-emoji">üí£</div>
                    <div class="superlative-title text-bust">Biggest Bust</div>
                    <div class="font-bold text-lg text-[var(--text-primary)] mb-1">Kim Jong Nate</div>
                    <p class="text-xs text-[var(--text-secondary)] leading-snug mt-2">
                        Scored a pathetic <strong>89.16 points</strong>. You managed to lose to the 14th place team while owning De'Von Achane (29.8 pts). The rest of your roster didn't just underperform; they went on strike.
                    </p>
                </div>

                <!-- Worst Manager Award -->
                <div class="superlative-card p-5 text-center">
                    <div class="superlative-emoji">ü§¶‚Äç‚ôÇÔ∏è</div>
                    <div class="superlative-title text-worst">Worst Manager Award</div>
                    <div class="font-bold text-lg text-[var(--text-primary)] mb-1">Good Will Hunting</div>
                    <p class="text-xs text-[var(--text-secondary)] leading-snug mt-2">
                        For losing despite <strong>Josh Allen</strong> scoring 44.68 points. How do you waste a legendary QB performance like that? It takes a special kind of roster mismanagement to fumble a 40-point head start.
                    </p>
                </div>

                <!-- Most Fraudulent Win -->
                <div class="superlative-card p-5 text-center">
                    <div class="superlative-emoji">üßê</div>
                    <div class="superlative-title text-fraud">Most Fraudulent Win</div>
                    <div class="font-bold text-lg text-[var(--text-primary)] mb-1">Poop Squad</div>
                    <p class="text-xs text-[var(--text-secondary)] leading-snug mt-2">
                        You scored <strong>91.26 points</strong>. That is well under 100 and well under the league median (113.08). You only won because Kim Jong Nate scored 89. This wasn't a victory; it was a survival horror movie.
                    </p>
                </div>

            </div>
        </div>

        <!-- Rankings Grid -->
        <div id="rankings-grid" class="space-y-6 max-w-4xl mx-auto">
            <!-- Content injected via JS -->
        </div>

    </main>

    <footer class="mt-12 py-8 text-center text-[var(--text-secondary)] text-sm border-t border-[var(--border)]">
        <p class="italic">¬© 2025 NFL Unlocked. If you're not first, you're last.</p>
    </footer>

    <script>
        // --- CONFIGURATION & DATA ---
        
        // MEDIAN SCORES (W1 - W11)
        const MEDIAN_SCORES = [114.86, 125.62, 116.38, 134.98, 129.53, 115.22, 122.07, 119.48, 121.29, 118.88, 113.08];
        
        const teams = [
            {
                rank: 1, prevRank: 1, name: "Hail Mary", record: "18-4-0", points: 1506.96,
                trend: [115.44, 120.66, 163.30, 140.64, 130.52, 145.22, 137.54, 152.66, 123.14, 140.76, 137.08],
                badges: ["The Empire", "Title Favorite"],
                desc: "The Commissioner continues to rule with an iron fist. It's been a season of pure dominance for Andrew. After a slightly mortal start (115 pts in Week 1), he exploded in Week 3 with 163 points and hasn't looked back. He's consistently crushed the median line for 10 straight weeks. A comfortable win this week (137.08 pts) solidified his spot at the top. <strong>George Pickens</strong> went absolutely nuclear with <strong>25.90 points</strong>, and <strong>Trey McBride</strong> added <strong>23.50 points</strong> just for fun. He is currently valued perfectly as the league's final boss."
            },
            {
                rank: 2, prevRank: 3, name: "The Injured Reserved", record: "15-7-0", points: 1547.24,
                trend: [128.70, 155.52, 144.56, 125.06, 117.56, 121.94, 184.48, 157.12, 150.54, 116.76, 145.00],
                badges: ["Points Leader", "Trade Winner"],
                desc: "Greg jumps to #2 in the Power Rankings despite being the #3 seed, simply because this team is a nuclear weapon right now. Leading the league in total points (1547), they just dropped a massive 145.00 points. The season chart shows a team peaking at the perfect time. The controversial trade for <strong>Christian McCaffrey</strong> is looking like the steal of the century. Plus, he's active on waivers, just grabbing the Buccaneers DEF for $55. This is the team nobody wants to face."
            },
            {
                rank: 3, prevRank: 2, name: "Shut Up", record: "16-6-0", points: 1512.68,
                trend: [110.54, 157.96, 123.56, 134.92, 169.84, 157.02, 139.94, 142.40, 108.26, 164.74, 103.50],
                badges: ["Rich ($990)", "Stumbled"],
                desc: "Neil drops slightly to #3 after finally looking mortal this week (season-low 103.50 pts). It's a rare blip on an otherwise stellar season where he's consistently crushed the median. The scariest part? Neil still has <strong>$990 in FAAB</strong>. He basically has unlimited funds to fix any hole in his roster before the playoffs. The sleeping giant is just resting, but the offense needs to wake up before the playoffs."
            },
            {
                rank: 4, prevRank: 6, name: "FreeGucci", record: "14-8-0", points: 1417.56,
                trend: [141.14, 117.36, 117.96, 153.64, 154.82, 121.34, 143.30, 103.52, 130.68, 121.00, 112.80],
                badges: ["Hot Streak", "54 Moves"],
                desc: "Nishil moves up to #4, leaping over Mac Daddy. He's on fire, winning 3 in a row. Even with <strong>Lamar Jackson</strong> (17.79 pts) looking merely mortal this week, the team found a way to win (112.80 pts). The roster churn is absolutely insane‚Äîhe has made <strong>54 moves</strong> this season! He just dropped a massive <strong>$151 on Michael Carter</strong> and another <strong>$25 on Xavier Legette</strong>, treating the waiver wire like an open bar. The constant tinkering is finally paying dividends."
            },
            {
                rank: 5, prevRank: 5, name: "Mac Daddy", record: "15-7-0", points: 1430.06,
                trend: [128.20, 130.58, 132.24, 164.04, 125.14, 111.28, 119.78, 118.28, 146.72, 140.44, 113.36],
                badges: ["Quietly Good", "Consistent"],
                desc: "Maclane slides a spot not because he's bad, but because FreeGucci is hotter. Mac Daddy flies under the radar, winning consistently but rarely exploding (except for Week 4's 164 pts). He's the model of consistency, rarely having a true 'bust' week. A solid 113.36 point outing secured another W this week. <strong>Travis Etienne Jr.</strong> and <strong>Josh Jacobs</strong> formed a dynamic backfield duo. Solid, safe, but maybe lacks the ceiling of the top 3."
            },
            {
                rank: 6, prevRank: 7, name: "ShakeNBake", record: "13-9-0", points: 1402.86,
                trend: [94.94, 143.12, 114.80, 167.10, 130.54, 108.48, 138.14, 132.36, 105.82, 134.04, 133.52],
                badges: ["Survivor", "Gritty"],
                desc: "Abhishek refuses to die. His season chart is the definition of volatile‚Äîhuge peaks (167 pts in Week 4) and valleys (94 pts in Week 1). But he finds ways to win when it matters. He started <strong>J.J. McCarthy</strong> (8.00 pts) at QB this week and <em>still</em> put up 133.52 points to get the win. That is absurd. <strong>Jahmyr Gibbs</strong> was the hero. He wisely cut McCarthy this morning, realizing that luck only goes so far."
            },
            {
                rank: 7, prevRank: 4, name: "A dad", record: "13-9-0", points: 1375.22,
                trend: [116.78, 112.02, 103.88, 141.12, 161.80, 98.96, 142.66, 124.10, 159.42, 97.08, 117.40],
                badges: ["Sliding", "Panic Spender"],
                desc: "Barrett is sliding in the wrong direction with back-to-back losses. After peaking in Week 5 (161 pts) and Week 9 (159 pts), the offense has stalled significantly. Desperation might be setting in‚Äîhe just dropped a massive <strong>$511</strong> on waiver wire RB <strong>Emanuel Wilson</strong>. That is either a stroke of genius or the sign of a manager tilting off the face of the earth. Time will tell."
            },
            {
                rank: 8, prevRank: 11, name: "Bend The Knee", record: "7-15-0", points: 1293.02,
                trend: [129.30, 153.52, 110.80, 97.12, 138.66, 105.94, 97.74, 116.34, 107.64, 96.76, 139.20],
                badges: ["Spoiler", "Explosive"],
                desc: "Major jump for Darrius M in the Power Rankings! While his record is poor (7-15), his recent performance says otherwise. He woke up feeling dangerous and dropped 139.20 points to play spoiler this week. The shock of the week: <strong>Sean Tucker</strong> scored a mind-boggling <strong>34.00 points</strong>. He's actively churning the roster too (added Cairo Santos). This is a dangerous team that can beat anyone on their day."
            },
            {
                rank: 9, prevRank: 8, name: "Good Will Hunting", record: "12-10-0", points: 1310.16,
                trend: [112.50, 85.58, 133.12, 163.06, 105.12, 119.16, 103.18, 103.14, 126.54, 141.26, 117.50],
                badges: ["Unlucky", "Josh Allen"],
                desc: "Will posted 117.50 points and lost, a recurring theme in his frustrating 12-10 season. He consistently scores well but runs into opponents having career days. His chart shows he's mostly hovered around the median. But this week? <strong>Josh Allen</strong> put the team on his back with an incredible <strong>44.68 points</strong>, and they <em>still</em> lost. When your QB scores 44 and you take an L, you know the fantasy gods are against you."
            },
            {
                rank: 10, prevRank: 9, name: "Kim Jong Nate", record: "9-13-0", points: 1351.04,
                trend: [110.22, 136.00, 109.88, 135.04, 128.54, 129.28, 123.72, 104.62, 119.44, 165.14, 89.16],
                badges: ["Fleeced", "Rock Bottom"],
                desc: "It has been a rough month for Nathan. After a monster Week 10 performance (165 pts) that looked like a turning point, the wheels completely fell off. He hit a season-low this week: losing to Poop Squad with a pitiful 89.16 points. He finally dropped the ghost of <strong>Calvin Ridley</strong> this morning, trying to exorcise the demons of the CMC trade. He also added Nick Cross and AJ Barner, looking for answers."
            },
            {
                rank: 11, prevRank: 10, name: "Bullish", record: "8-14-0", points: 1320.18,
                trend: [114.28, 117.88, 112.98, 120.12, 155.64, 128.06, 103.06, 151.14, 115.76, 96.76, 104.50],
                badges: ["Bear Market", "Low Energy"],
                desc: "Mohsin is in a bear market. After a massive spike in Week 5 (155 pts) and another in Week 8 (151 pts), the team has been on a slow, painful decline, failing to break 115 points for three straight weeks. Another loss keeps him near the bottom. <strong>Romeo Doubs</strong> and <strong>Rachaad White</strong> were bright spots, but <strong>Caleb Williams</strong> crashed hard. The portfolio is bleeding value, and the team is rightfully ranked low."
            },
            {
                rank: 12, prevRank: 13, name: "Leo the Cleo", record: "4-18-0", points: 1233.46,
                trend: [143.32, 105.94, 113.68, 108.58, 93.78, 108.18, 120.42, 120.68, 110.80, 95.38, 112.70],
                badges: ["Unlucky", "Bijan or Bust"],
                desc: "Chris moves up one spot purely on potential. Despite a 4-game slide, he actually played well this week (112.70 pts), nearly hitting the median. He ran into the buzzsaw that was The Injured Reserved (145 pts). Sometimes you just can't catch a break. <strong>Bijan Robinson</strong> is doing everything he can, but he needs help. The Waffle House is calling, but at least the effort is there."
            },
            {
                rank: 13, prevRank: 14, name: "Poop Squad", record: "4-18-0", points: 1118.96,
                trend: [83.64, 93.40, 127.54, 126.26, 90.76, 101.00, 95.06, 100.20, 111.02, 98.82, 91.26],
                badges: ["THE STREAK", "Alive"],
                desc: "THE STREAK IS ALIVE! Poop Squad jumps out of the cellar to #13. Winning two games in a row changes everything. After looking dead in the water for 10 weeks‚Äîoften failing to break 100 points‚ÄîAnuj's squad has found a pulse. They put up a fraudulent 91.26 points to beat Kim Jong Nate, but a win is a win. <strong>TreVeyon Henderson</strong> went berserk. He just added kicker <strong>Jake Bates</strong>, clearly loading up for a late-season push to respectability."
            },
            {
                rank: 14, prevRank: 12, name: "Miley Hannah Montana", record: "6-16-0", points: 1161.32,
                trend: [113.84, 137.64, 75.42, 119.96, 75.96, 94.04, 91.24, 106.60, 135.76, 116.40, 94.46],
                badges: ["Wrecking Ball", "Tanking?"],
                desc: "Greg falls to the absolute bottom. While his record (6-16) is better than the teams above him, his trajectory is a disaster. He hasn't consistently broken the median threshold since Week 2. Scoring just 94.46 points this week extends his losing streak. <strong>CeeDee Lamb</strong> is trying, but <strong>Justin Herbert</strong> was an absolute disaster. This team has no momentum, no FAAB ($0), and no hope."
            }
        ];

        // --- Logic ---

        function getRankColorClass(rank, totalTeams) {
            if (rank === 1) return 'rank-gold';
            if (rank <= 5) return 'rank-green';
            if (rank >= totalTeams - 3) return 'rank-red'; // Bottom 4
            return 'rank-neutral';
        }

        function animateValue(obj, start, end, duration) {
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                const easeProgress = 1 - Math.pow(1 - progress, 3);
                obj.innerHTML = Math.floor(progress * (end - start) + start);
                if (progress < 1) {
                    window.requestAnimationFrame(step);
                } else {
                    obj.innerHTML = end;
                }
            };
            window.requestAnimationFrame(step);
        }

        function renderRankings() {
            const container = document.getElementById('rankings-grid');
            container.innerHTML = '';

            teams.forEach((team, index) => {
                const isRising = team.rank < team.prevRank;
                const isFalling = team.rank > team.prevRank;
                const diff = Math.abs(team.prevRank - team.rank);
                
                let trendClass = 'trend-flat';
                let trendText = '-';
                if (isRising) { trendClass = 'trend-up'; trendText = `‚ñ≤ ${diff}`; }
                else if (isFalling) { trendClass = 'trend-down'; trendText = `‚ñº ${diff}`; }

                const card = document.createElement('div');
                card.className = 'ranking-card p-6 card-enter';
                card.style.animationDelay = `${(index + 4) * 0.05}s`; // Stagger after superlatives
                
                const badgesHtml = team.badges.map(b => `<span class="badge">${b}</span>`).join('');
                const rankColorClass = getRankColorClass(team.rank, teams.length);

                card.innerHTML = `
                    <div class="flex flex-row items-start gap-6">
                        <div class="flex-shrink-0 w-16 text-center pt-1">
                            <span class="rank-number ${rankColorClass}" id="rank-num-${index}">0</span>
                            <div class="text-xs mt-1 ${trendClass} font-bold uppercase tracking-wider">${trendText}</div>
                        </div>
                        <div class="flex-grow w-full min-w-0">
                            <div class="flex flex-wrap justify-between items-baseline mb-1">
                                <div class="flex items-center gap-3">
                                    <h2 class="text-2xl font-bold text-[var(--text-primary)] leading-none tracking-tight">${team.name}</h2>
                                </div>
                                <div class="font-mono text-sm text-[var(--text-secondary)]">
                                    <span class="font-bold text-[var(--text-primary)]">${team.record}</span> 
                                    <span class="opacity-70 ml-1">(${team.points.toFixed(2)} PF)</span>
                                </div>
                            </div>
                            <div class="flex flex-wrap gap-2 mb-3">${badgesHtml}</div>
                            <p class="text-[var(--text-secondary)] text-sm leading-relaxed mb-4 font-medium">${team.desc}</p>
                            <div class="mt-4 pt-4 border-t border-[var(--border)]">
                                <div class="flex justify-between items-end mb-2">
                                    <p class="text-[10px] font-bold text-[var(--text-secondary)] uppercase tracking-wider">Scoring Trend vs League Median</p>
                                </div>
                                <div class="chart-wrapper"><canvas id="chart-${team.rank}"></canvas></div>
                            </div>
                        </div>
                    </div>
                `;
                
                container.appendChild(card);
                
                setTimeout(() => {
                    const rankEl = document.getElementById(`rank-num-${index}`);
                    animateValue(rankEl, 0, team.rank, 1000);
                }, (index + 4) * 100);

                renderSparkline(`chart-${team.rank}`, team.trend);
            });
        }

        function renderSparkline(canvasId, data) {
            const ctx = document.getElementById(canvasId).getContext('2d');
            const isDark = document.documentElement.classList.contains('dark');
            const lineColor = getComputedStyle(document.documentElement).getPropertyValue('--chart-line').trim();
            const fillColor = getComputedStyle(document.documentElement).getPropertyValue('--chart-fill').trim();
            const medianColor = getComputedStyle(document.documentElement).getPropertyValue('--chart-median').trim();

            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['W1', 'W2', 'W3', 'W4', 'W5', 'W6', 'W7', 'W8', 'W9', 'W10', 'W11'],
                    datasets: [
                        {
                            data: data,
                            borderColor: lineColor,
                            backgroundColor: fillColor,
                            borderWidth: 2,
                            tension: 0.4,
                            pointBackgroundColor: lineColor,
                            pointBorderColor: '#fff',
                            pointBorderWidth: 2,
                            pointRadius: 0, 
                            pointHoverRadius: 6,
                            fill: 'origin',
                            order: 1
                        },
                        {
                            data: MEDIAN_SCORES,
                            borderColor: medianColor,
                            borderWidth: 1.5,
                            borderDash: [4, 4],
                            pointRadius: 0,
                            pointHoverRadius: 0,
                            fill: false,
                            tension: 0.4,
                            order: 2
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false }, tooltip: { enabled: true, mode: 'index', intersect: false, displayColors: false } },
                    scales: { x: { display: false }, y: { display: false, min: 50 } },
                    interaction: { mode: 'nearest', axis: 'x', intersect: false },
                    layout: { padding: { top: 10, bottom: 5, left: 5, right: 5 } }
                }
            });
        }

        const themeToggle = document.getElementById('theme-toggle');
        const html = document.documentElement;

        function updateThemeIcons() {
            const sunIcon = document.getElementById('sun-icon');
            const moonIcon = document.getElementById('moon-icon');
            if (html.classList.contains('dark')) {
                sunIcon.classList.remove('hidden');
                moonIcon.classList.add('hidden');
            } else {
                sunIcon.classList.add('hidden');
                moonIcon.classList.remove('hidden');
            }
        }

        themeToggle.addEventListener('click', () => {
            html.classList.toggle('dark');
            updateThemeIcons();
            const container = document.getElementById('rankings-grid');
            container.innerHTML = '';
            renderRankings();
        });

        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            html.classList.add('dark');
        }
        updateThemeIcons();
        renderRankings();

    </script>
</body>
</html>
